<html><head><script>(function(a){'use strict';document.registerElement('amp-viewer',{prototype:{__proto__:HTMLElement.prototype,createdCallback:function(){this._amp=null,this._src='',this._host=null,this._CACHE_SIZE=10,a.AMP_SHADOW=!0,this._installScript('https://cdn.ampproject.org/shadow-v0.js'),this._ampReadyPromise=new Promise(function(b){(a.AMP=a.AMP||[]).push(b)}),this.hasAttribute('src')&&(this.src=this.getAttribute('src'))},set src(a){this._src===a||(this._src=a,this._clear(),console.log('uscito da clear'),a?(this.setAttribute('src',a),console.log('src: '+a),this._loadDocument(a)):(console.log('src non definito'),this.removeAttribute('src')))},get src(){return this._src},attributeChangedCallback:function(a,b,c){var d=Object.getOwnPropertyDescriptor(this.__proto__,a);d&&null!=d.set&&(this[a]=c)},setVisibilityState:function(a){this._amp&&this._amp.setVisibilityState(a)},_clear:function(){console.log('clear amp amp-viewer'),this._amp&&(console.log('provo a chiudere il documento amp'),this._amp.close(),this._amp=null),this._host&&(this.removeChild(this._host),this._host=null)},_loadDocument:function(b){this._fetchDocument(b).then(function(c){this._ampReadyPromise.then(function(d){this._hideUnwantedElementsOnDocument(c),console.log('doc: '+JSON.stringify(c)),this._host=a.document.createElement('div'),this._host.classList.add('amp-doc-host'),this.appendChild(this._host),this._amp=d.attachShadowDoc(this._host,c,b)}.bind(this))}.bind(this))},_hideUnwantedElementsOnDocument:function(a){console.log('_hideUnwantedElementsOnDocument');['bottom-header'].forEach(function(b){console.log('Provo a rimuovere: '+b);var c=a.getElementById(b);c&&(console.log('rimuovo elemento: '+c.innerHTML),c.parentNode.removeChild(c))}),['main-footer','main-header'].forEach(function(b){var c=a.getElementsByClassName(b);c&&Array.prototype.forEach.call(c,function(a){console.log('rimuovo elemento: '+a.innerHTML),a.parentNode.removeChild(a)})}),['amp-analytics(type=webtrekk)','amp-user-notification'].forEach(function(b){var c=0<=b.indexOf('(')&&0<=b.indexOf(')')?b.substring(b.lastIndexOf('(')+1,b.lastIndexOf(')')).split(','):[],d=b.split('(')[0],e=a.getElementsByTagName(d);Array.prototype.forEach.call(e,function(a){console.log('elemento: '+a.innerHTML);for(var b,d=!0,e=0;e<c.length;e++)if(b=c[e].split('='),2==b.length){console.log('KEY',b[0]);var f=a.getAttribute(b[0]);console.log('ATTRIBUTE',f),console.log('VALUE',b[1]),f!=b[1]&&(d=!1)}d&&(console.log('rimuovo elemento: '+a.innerHTML),a.parentNode.removeChild(a))})})},_installScript:function(a){var b=this.ownerDocument,c=b.createElement('script');c.setAttribute('src',a),b.head.appendChild(c)},_fetchDocument:function(a){return new Promise(function(b,c){var d=new XMLHttpRequest;d.open('GET',a,!0),d.responseType='document',d.setRequestHeader('Accept','text/html'),d.onreadystatechange=function(){return 2>d.readyState?void 0:100>d.status||599<d.status?(d.onreadystatechange=null,void c(new Error('Unknown HTTP status ${xhr.status}'))):void(4==d.readyState&&(d.responseXML?b(d.responseXML):c(new Error('No xhr.responseXML'))))},d.onerror=function(){c(new Error('Network failure'))},d.onabort=function(){c(new Error('Request aborted'))},d.send()})}}})})(window);</script></head><body></body></html>