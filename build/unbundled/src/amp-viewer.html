<html><head><script>(function(a){'use strict';document.registerElement('amp-viewer',{prototype:{__proto__:HTMLElement.prototype,createdCallback:function(){this._amp=null,this._src='',this._host=null,this._CACHE_SIZE=10,a.AMP_SHADOW=!0,this._installScript('https://cdn.ampproject.org/shadow-v0.js'),this._ampReadyPromise=new Promise(function(b){(a.AMP=a.AMP||[]).push(b)}),this.hasAttribute('src')&&(this.src=this.getAttribute('src'))},set src(b){this._src===b||(this._src=b,this._clear(),console.log('uscito da clear'),b?(this.setAttribute('src',b),console.log('src: '+b),this._loadDocument(b)):(console.log('src non definito'),this.removeAttribute('src')))},get src(){return this._src},attributeChangedCallback:function(b,c,d){var f=Object.getOwnPropertyDescriptor(this.__proto__,b);f&&null!=f.set&&(this[b]=d)},setVisibilityState:function(b){this._amp&&this._amp.setVisibilityState(b)},_clear:function(){console.log('clear amp amp-viewer'),this._amp&&(console.log('provo a chiudere il documento amp'),this._amp.close(),this._amp=null),this._host&&(this.removeChild(this._host),this._host=null)},_loadDocument:function(b){this._fetchDocument(b).then(function(c){this._ampReadyPromise.then(function(d){this._hideUnwantedElementsOnDocument(c),console.log('doc: '+JSON.stringify(c)),this._host=a.document.createElement('div'),this._host.classList.add('amp-doc-host'),this.appendChild(this._host),this._amp=d.attachShadowDoc(this._host,c,b)}.bind(this))}.bind(this))},_hideUnwantedElementsOnDocument:function(b){console.log('_hideUnwantedElementsOnDocument');['bottom-header'].forEach(function(g){console.log('Provo a rimuovere: '+g);var h=b.getElementById(g);h&&(console.log('rimuovo elemento: '+h.innerHTML),h.parentNode.removeChild(h))}),['main-footer','main-header'].forEach(function(g){var h=b.getElementsByClassName(g);h&&Array.prototype.forEach.call(h,function(j){console.log('rimuovo elemento: '+j.innerHTML),j.parentNode.removeChild(j)})}),['amp-analytics(type=webtrekk)','amp-user-notification'].forEach(function(g){var h=0<=g.indexOf('(')&&0<=g.indexOf(')')?g.substring(g.lastIndexOf('(')+1,g.lastIndexOf(')')).split(','):[],j=g.split('(')[0],k=b.getElementsByTagName(j);Array.prototype.forEach.call(k,function(l){console.log('elemento: '+l.innerHTML);for(var p,n=!0,o=0;o<h.length;o++)if(p=h[o].split('='),2==p.length){console.log('KEY',p[0]);var q=l.getAttribute(p[0]);console.log('ATTRIBUTE',q),console.log('VALUE',p[1]),q!=p[1]&&(n=!1)}n&&(console.log('rimuovo elemento: '+l.innerHTML),l.parentNode.removeChild(l))})})},_installScript:function(b){var c=this.ownerDocument,d=c.createElement('script');d.setAttribute('src',b),c.head.appendChild(d)},_fetchDocument:function(b){return new Promise(function(c,d){var f=new XMLHttpRequest;f.open('GET',b,!0),f.responseType='document',f.setRequestHeader('Accept','text/html'),f.onreadystatechange=function(){return 2>f.readyState?void 0:100>f.status||599<f.status?(f.onreadystatechange=null,void d(new Error('Unknown HTTP status ${xhr.status}'))):void(4==f.readyState&&(f.responseXML?c(f.responseXML):d(new Error('No xhr.responseXML'))))},f.onerror=function(){d(new Error('Network failure'))},f.onabort=function(){d(new Error('Request aborted'))},f.send()})}}})})(window);</script></head><body></body></html>